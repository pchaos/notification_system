<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}公告通知系统{% endblock %}</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6;
      /* Light gray background */
    }

    .container {
      max-width: 1200px;
    }

    /* Markdown 渲染样式 */
    .markdown-content h1 {
      font-size: 2.25rem;
      font-weight: 700;
      margin-top: 1.5em;
      margin-bottom: 0.75em;
    }

    .markdown-content h2 {
      font-size: 1.875rem;
      font-weight: 600;
      margin-top: 1.25em;
      margin-bottom: 0.6em;
    }

    .markdown-content h3 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-top: 1em;
      margin-bottom: 0.5em;
    }

    .markdown-content p {
      margin-bottom: 1em;
      line-height: 1.6;
    }

    .markdown-content ul,
    .markdown-content ol {
      margin-left: 1.5em;
      margin-bottom: 1em;
      list-style-type: disc;
    }

    .markdown-content ol {
      list-style-type: decimal;
    }

    .markdown-content li {
      margin-bottom: 0.5em;
    }

    .markdown-content a {
      color: #3b82f6;
      text-decoration: underline;
    }

    .markdown-content pre {
      background-color: #e2e8f0;
      /* bg-gray-200 */
      padding: 1rem;
      border-radius: 0.5rem;
      /* rounded-md */
      overflow-x: auto;
      margin-bottom: 1em;
    }

    .markdown-content code {
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      background-color: #e2e8f0;
      /* bg-gray-200 */
      padding: 0.2em 0.4em;
      border-radius: 0.25rem;
    }

    .markdown-content blockquote {
      border-left: 4px solid #9ca3af;
      /* border-gray-400 */
      padding-left: 1em;
      color: #4b5563;
      /* text-gray-700 */
      margin-bottom: 1em;
    }

    .markdown-content table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1em;
    }

    .markdown-content th,
    .markdown-content td {
      border: 1px solid #d1d5db;
      /* border-gray-300 */
      padding: 0.75em;
      text-align: left;
    }

    .markdown-content th {
      background-color: #f3f4f6;
      /* bg-gray-100 */
      font-weight: 600;
    }
  </style>
</head>

<body class="min-h-screen flex flex-col">
  <nav class="bg-white shadow-md p-4">
    <div class="container mx-auto flex justify-between items-center">
      <a href="{% url 'announcement_list' %}" class="text-2xl font-bold text-gray-800">公告通知系统</a>
      <div class="space-x-4">
        {% if user.is_authenticated %}
        <span class="text-gray-700">欢迎, {{ user.username }}!</span>
        {% if perms.announcements.add_announcement %} {# 检查是否有发布公告的权限 #}
        <a href="{% url 'announcement_create' %}"
          class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow-md transition duration-300">发布公告</a>
        {% endif %}
        <a href="{% url 'logout' %}" class="text-gray-700 hover:text-gray-900">登出</a>
        {% else %}
        <a href="{% url 'login' %}" class="text-gray-700 hover:text-gray-900">登录</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="container mx-auto mt-8 p-4 flex-grow">
    {% if messages %}
    <div class="mb-4">
      {% for message in messages %}
      <div
        class="p-3 mb-2 rounded-md {% if message.tags == 'success' %}bg-green-100 text-green-800{% elif message.tags == 'error' %}bg-red-100 text-red-800{% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-800{% else %}bg-blue-100 text-blue-800{% endif %}">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% block content %}{% endblock %}
  </div>

  <footer class="bg-gray-800 text-white p-4 mt-8">
    <div class="container mx-auto text-center">
      <p>&copy; 2024 公告通知系统. All rights reserved.</p>
    </div>
  </footer>
</body>

</html>


